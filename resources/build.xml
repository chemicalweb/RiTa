<project name="RiTa" default="clean" basedir="../">

	<taskdef resource="net/sf/antcontrib/antcontrib.properties">
		<classpath><pathelement location="./libs/ant-contrib-1.0b3.jar"/></classpath>
	</taskdef>

	<property file="./resources/build.properties" />

	<description>${ant.description}</description>

	<property name="processing.sketchbook" location="/XXX"/> <!-- ${user.home}/Documents/Processing"/>  -->
	
	<property name="line" value="------------------------------------------------------------------------------------------------" />

	<condition property="is.normal">
		<equals arg1="${project.compile}" arg2="normal" />
	</condition>

	<!--property environment="env"/-->
	<property name="main.package" value="rita"/>
	<property name="reports.tests" value="reports"/>
	<property name="path.to.node" value="/usr/local/bin"/>
	<property name="project.jar.name" value="${main.package}.jar"/>
	<property name="project.jar.full.name" value="${main.package}.full.jar"/>
	<property name="project.jar.support.name" value="${main.package}.support.jar"/>
	<property name="project.src" location="src"/>
	<property name="project.src.test" location="src/rita/test"/>
	<property name="project.latest" location="latest"/>
	<property name="project.tmp" location="tmp"/>
	<property name="project.web" location="web"/>
	<property name="project.data" location="data"/>
	<!--property name="project.lib" location="lib"/-->
	<property name="project.libs" location="libs"/>
	<property name="project.bin" location="bin"/>
	<property name="project.bin.data" location="${project.bin}/data"/>
	<property name="project.examples" location="www/examples"/>
	<property name="project.reference" location="reference"/>
	<property name="project.dist" location="distribution"/>
	<property name="project.dist.version" location="distribution/${project.name}-${project.version}"/>
	<property name="project.download" location="${project.dist.version}/download"/>
	<!--property name="project.jsbuild" location="${project.js}/build"/>
	<property name="project.jsbuild.www" location="${project.jsbuild}/www"/>
	<property name="project.jsbuild.download" location="${project.jsbuild.www}/download"/-->
	<property name="install.source" location="resources/install_instructions.txt"/>
	<property name="license.source" location="resources/license.txt"/>
	<property name="props.src" location="resources/library.properties"/>
	<property name="props.dst" location="${project.dist.version}/${project.name}/library.properties"/>
	<property name="install.destination" location="${project.dist.version}/INSTALL.txt"/>
	<property name="license.destination" location="${project.dist.version}/RiTa/LICENSE.txt"/>
	
	<property name="processing.lib.rita" location="${processing.sketchbook}/libraries/RiTa"/>
	<property name="processing.library" location="${processing.lib.rita}/library"/>
	<property name="processing.examples" location="${processing.lib.rita}/examples"/>

    <!-- optional stuff for rita-js -->
	<property name="project.js" location="RiTaLibraryJS"/>
	<property name="project.js.name" value="rita.js"/>
	<property name="rita.js.scripts" location="${project.js}/scripts"/>
	<property name="rita.js.src" location="${project.js}/src"/>
	<property name="rita.js.file" location="${rita.js.src}/${project.js.name}"/>

	<!-- ********************** CLASSPATHS ********************** -->

	<path id="classpath">
		<fileset dir="${project.libs}" includes="**/*.jar" excludes="ant-contrib-*"/>
	</path>
	<path id="test.classpath">
		<fileset dir="${project.libs}" includes="**/*.jar" excludes="ant-contrib-*"/>
		<pathelement path="${project.bin}" />
    	<pathelement path="${project.src}" />
    	<!--pathelement path="${project.src}" /-->
	</path>

    <!-- get the source compile classpath in a printable form -->
    <pathconvert pathsep="${line.separator}|   |-- "
                 property="echo.classpath"
                 refid="classpath">
    </pathconvert>
    <pathconvert pathsep="${line.separator}|   |-- "
                 property="echo.test.classpath"
                 refid="test.classpath">
    </pathconvert>
				
	<!-- ********************** TARGETS ********************** -->
    
	<target name="run.unit.tests">
		<antcall target="run.java.tests" />
		<antcall target="run.node.tests" />
	</target>

	<target name="run.node.tests" depends="check.rita.js" if="rita.js.present">
		<echo>${line}</echo>
		<echo message="Calling run-node-tests.sh ..." />
		<exec dir="${rita.js.scripts}" resolveexecutable="true" output="/dev/null" 
            executable="run-node-tests.sh" failonerror="true" failifexecutionfails="true" logError="true">
			<env key="PATH" value="${env.PATH}:${path.to.node}" />
		</exec>
		<echo>${line}</echo>
		<echo message="all node-tests passed." />
		<echo>${line}</echo>
	</target>
		
	<target name="run.java.tests" depends="init">

		<junit printsummary="yes" timeout="100000" haltonfailure="yes">

			<classpath><path refid="test.classpath"/></classpath>

			<formatter type="plain" />
			<formatter type="xml" />
	
			<test name="rita.test.RiLexiconTest" outfile="reports/rita.test.RiLexiconTest"></test>
			<test name="rita.test.RiTaTest"      outfile="reports/rita.test.RiTaTest"></test>
			<test name="rita.test.RiGrammarTest" outfile="reports/rita.test.RiGrammarTest"></test>
			<test name="rita.test.RiMarkovTest"  outfile="reports/rita.test.RiMarkovTest"></test>
			<test name="rita.test.RiStringTest"  outfile="reports/rita.test.RiStringTest"></test>
			<test name="rita.test.RiTaEventTest" outfile="reports/rita.test.RiTaEventTest"></test>
			<test name="rita.test.RiWordNetTest" outfile="reports/rita.test.RiWordNetTest"></test>
			<!--test name="rita.test.RiWordNetIteratorsTest"  haltonfailure="no" outfile="reports/rita.test.RiWordNetTest"></test-->
		</junit>

	</target>

	<target name="_make.all">

		<antcall target="run.unit.tests" />
		<antcall target="_script.make-lib.sh" />
		<antcall target="clean" />
		<antcall target="_script.make-node.sh" />
	</target>

	<target name="_make.and.pub.local">
		<antcall target="_make.all" />
		<antcall target="_publish.local" />
	</target>

	<target name="_publish.local">
		<antcall target="_script.pub.local" />
	</target>

	<target name="_publish.rednoise">
		<antcall target="_script.pub.rednoise" />
	</target>

	<!-- Create the time stamp -->
	<tstamp>
		<format property="date" pattern="MM/dd/yyyy" offset="0" unit="hour"/>
	</tstamp>

	<target name="init">
		<echo>${line}
	building ${project.name} ${project.version}
${line}
	src path	${project.src}
	bin path 	${project.bin}
	sketchbook	${sketchbook.location}
	java version	${java.version}
	java target     ${java.target.version}
    classpath       ${class.path}
${line}
		</echo>

	</target>

	<target name="library.init" depends="init">
		<echo message="Init library ..." />
	</target>

	<target name="_script.make-lib.sh">
		<echo>${line}</echo>
		<echo message="Calling make-lib.sh ..." />
		<exec dir="${rita.js.scripts}" resolveexecutable="true" executable="make-lib.sh" failonerror="true">
			<arg line="${project.version}"/>
		</exec>
		<echo>${line}</echo>
	</target>

	<target name="_script.make-node.sh">
		<echo>${line}</echo>
		<echo message="Calling make-node.sh ..." />
		<exec dir="${rita.js.scripts}" resolveexecutable="true" executable="make-node.sh" failonerror="true">
			<env key="PATH" value="${env.PATH}:${path.to.node}" />
			<arg line="${project.version}"/>
		</exec>
		<echo>${line}</echo>
	</target>

	<target name="publish.pkgs">
		<antcall target="_publish.node" />
		<antcall target="_publish.bower" />

	</target>

	<target name="_publish.node">
		<echo>${line}</echo>
		<echo message="Calling make-node.sh ${project.version} -p ..." />
		<exec dir="${rita.js.scripts}" resolveexecutable="true" executable="make-node.sh" failonerror="true">
			<arg line="${project.version}"/>
			<arg line="-p"/>
		</exec>
		<echo>${line}</echo>
	</target>
	
	<target name="_publish.bower">
		<echo>${line}</echo>
		<echo>Nothing to do for Bower!!</echo>
		<!--echo message="Calling make-bower.sh ${project.version} -p ..." />
		<exec dir="${rita.js.scripts}" resolveexecutable="true" executable="make-node.sh" failonerror="true">
			<arg line="${project.version}"/>
			<arg line="-p"/>
		</exec-->
		<echo>${line}</echo>
	</target>

	<target name="_publish.node.force">
		<echo>${line}</echo>
		<echo message="Calling make-node.sh ${project.version} -p -f ..." />
		<exec dir="${rita.js.scripts}" resolveexecutable="true" executable="make-node.sh" failonerror="true">
			<arg line="${project.version}"/>
			<arg line="-p"/>
			<arg line="-f"/>
		</exec>
		<echo>${line}</echo>
	</target>

	<target name="_script.pub.local">
		<echo>${line}</echo>
		<echo message="Calling pub-lib.sh ${project.version} ..." />
		<exec 
	    	dir="${rita.js.scripts}" resolveexecutable="true" resultproperty="return.code"
	    	executable="pub-lib.sh" failonerror="true">
			<arg line="${project.version}"/>
		</exec>
		<echo>${line}</echo>
	</target>


	<target name="_script.pub.rednoise">
		<echo>${line}</echo>
		<echo message="Calling pub-lib.sh ${project.version} -r ..." />
		<exec 
	    	dir="${rita.js.scripts}" resolveexecutable="true" resultproperty="return.code"
	    	executable="pub-lib.sh" failonerror="true">
			<arg line="${project.version}"/>
			<arg line="-r"/>
		</exec>
		<echo>${line}</echo>
	</target>

	<target name="make.java" depends="library.init">
		<echo message="Building library ..." />
		<antcall target="generate.structure"/>
		<antcall target="parse.source" />
		<antcall target="compile-debug" />
		<antcall target="generate.jars"/>
		<!--antcall target="generate.javadoc" /-->
		<!--antcall target="copyToSketchbook"><param name="folder" value="libraries"/></antcall-->
		<antcall target="generate.distribution" />
		<antcall target="generate.install.library" />
		<antcall target="generate.install.props" />
		<antcall target="generate.zip" />
		<delete dir="${project.tmp}" />
	</target>

	<target name="copyToSketchbook">
		<echo message="Copying files to the ${folder} folder in your sketchbook." />
		<!-- copy the jar file to processing's sketchbook libraries folder -->
		<delete dir="${sketchbook.location}/${folder}/${project.name}" />
		<mkdir dir="${sketchbook.location}/${folder}/${project.name}" />
		<copy todir="${sketchbook.location}/${folder}/${project.name}">
			<fileset dir="${project.tmp}/${project.name}" />
		</copy>
	</target>

	<target name="compile-debug">
		<javac srcdir="${project.tmp}/${project.name}/src"
			includeantruntime="false"
			destdir="${project.bin}" 
			source="${java.target.version}" 
			target="${java.target.version}"
			debug="true">
            <!-- CHANGED: debug="true" debuglevel="lines, vars, source"-->
			<classpath><path refid="classpath"/></classpath>
		</javac>
	</target>

	<target name="compile-prod">
		<javac srcdir="${project.tmp}/${project.name}/src" 
			excludes="**/test/**"
			destdir="${project.bin}" 
			source="${java.target.version}" 
			target="${java.target.version}">
			<classpath>
				<path refid="classpath" />
			</classpath>
		</javac>
	</target>

	<target name="generate.jar">
		<jar jarfile="${project.tmp}/${project.name}/library/${project.jar.name}" basedir="${project.bin}">
			<exclude name="**/data/**" />
			<exclude name="**/test/**" />
			<exclude name="**/docgen/**" />
		</jar>
		<!--copy tofile="${project.jsbuild.download}/${main.package}-${project.version}.jar" file="${project.tmp}/${project.name}/${folder}/${project.jar.name}"/-->
		<copy tofile="${project.latest}/${main.package}-${project.version}.jar" file="${project.tmp}/${project.name}/library/${project.jar.name}"/>
		<antcall target="copy.rita.jar.to.processing" />
	</target>
	
	<target name="copy.rita.jar.to.processing" depends="check.processing" if="processing.present">
		<!--echo message="Copying ${project.examples} to ${processing.examples}... " /-->
		<copy tofile="${processing.library}/rita.jar" file="${project.tmp}/${project.name}/library/${project.jar.name}"/>
	</target>
		
	<target name="generate.jars">

		<!-- full lib -->
		<jar jarfile="${project.latest}/${main.package}-${project.version}.jar" basedir="${project.bin}">
			<exclude name="**/data/**" />
			<exclude name="**/test/**" />
			<exclude name="**/docgen/**" />
		</jar>
		
		<!-- rita pkg only -->
		<jar jarfile="${project.tmp}/${project.name}/library/${project.jar.name}" basedir="${project.bin}">
			<include name="rita/*.*/" />
			<include name="*.properties/" />
			<exclude name="**/test/**" />
		</jar>
		
		<!-- support pkg only -->
		<jar jarfile="${project.tmp}/${project.name}/library/${project.jar.support.name}" basedir="${project.bin}">
			<exclude name="data/**" />
			<exclude name="rita/*.*/" />
			<exclude name="*.properties/" />
			<exclude name="**/test/**" />
			<exclude name="**/docgen/**" />
		</jar>
		<antcall target="copy.rita.jars.to.processing" />
	</target>

	<target name="copy.rita.jars.to.processing" depends="check.processing" if="processing.present">
			
			<copy tofile="${processing.library}/rita.jar" file="${project.tmp}/${project.name}/library/${project.jar.name}"/>
			<copy tofile="${processing.library}/rita.support.jar" file="${project.tmp}/${project.name}/library/${project.jar.support.name}"/>
	</target>

	<fileset id="exampleFileSet" dir="${project.examples}">
			<exclude name="**/*README*"/>
			<exclude name="**/*.html"/>
			<exclude name="**/*.properties"/>
			<exclude name="**/*.xml"/>
			<exclude name="**/web-export/**"/>
			<exclude name="**/lib/**"/>
	</fileset>
		
	<target name="copy.examples.to.processing" depends="check.processing" if="processing.present">
		<echo message="Copying ${project.examples} to ${processing.examples}... " />
		<copy todir="${processing.examples}">
			<fileset refid="exampleFileSet"/>
		</copy>
	</target>
	
	<target name="generate.structure">

		<mkdir dir="${project.bin}"/>
		<delete dir="${project.tmp}" />
		<mkdir dir="${project.tmp}" />
		<mkdir dir="${project.tmp}/${project.name}" />
		<mkdir dir="${project.tmp}/${project.name}/library" />
		<mkdir dir="${project.tmp}/${project.name}/examples" />
		<mkdir dir="${project.tmp}/${project.name}/reference" />
		<mkdir dir="${project.tmp}/${project.name}/css" />
		<mkdir dir="${project.tmp}/${project.name}/src" />


		
		<antcall target="copy.examples.to.processing" />

		<echo message="Copying ${project.examples} to ${project.tmp}/${project.name}/examples... " />
		<copy todir="${project.tmp}/${project.name}/examples">
			<fileset refid="exampleFileSet"/>
		</copy>

		<copy todir="${project.tmp}/${project.name}/src">
			<fileset dir="${project.src}">
				<exclude name="rita/test/sketches/**"/>
				<exclude name="**/data/**"/>
				<exclude name="**/docgen/**"/>
			</fileset>
		</copy>

		<copy todir="${project.tmp}/${project.name}/reference">
			<fileset dir="www/reference"/>
		</copy>

		<copy todir="${project.tmp}/${project.name}/css">
			<fileset dir="www/css/">
				<include name="*.css"/>
			</fileset>
		</copy>

		<zip destfile="${project.latest}/${project.name}-${project.version}-src.zip"
  	       basedir="${project.tmp}/${project.name}/src"
  	       excludes="**/.DS_Store"
		/>

	</target>

    <target name="check.rita.js">
		<echo message="Checking for rita.js..." />
        <available file="${rita.js.file}" property="rita.js.present"/>
    </target>
    
    <target name="check.processing">
		<echo message="Checking for Processing..." />
        <available file="${processing.sketchbook}" type="dir" property="processing.present"/>
    </target>

	<target name="fetch.rita.js" depends="check.rita.js" if="rita.js.present">
		<echo message="Fetching rita.js..." />
		<copy file="${project.latest}/${project.js.name}" todir="${project.tmp}/${project.name}/library" />
	</target>

    <!-- Add Version-info to RiTa.java      -->
	<target name="parse.source" if="is.normal">
		<path id="src.contents">
			<fileset dir="${project.tmp}/${project.name}/src/rita" includes="RiTa.java" />
		</path>
		<!--path id="src.contents"><fileset dir="${project.tmp}/${project.name}/src" includes="**/*.java" /></path-->
		<property name="src.list" refid="src.contents" />
		<foreach list="${src.list}" param="file" target="versionSourcefile" delimiter=":" />
	</target>


	<target name="generate.distribution" if="is.normal">
		<mkdir dir="${project.dist}"/>
		<delete dir="${project.dist.version}"/>
		<mkdir dir="${project.dist.version}" />
		<mkdir dir="${project.dist.version}/${project.name}" />
		<move file="${project.tmp}/${project.name}" toDir="${project.dist.version}" />
	</target>

	<target name="generate.javadoc" if="is.normal">

		<!-- MODIFIED BY DCH -->

		<javadoc bottom="processing library ${project.name} by ${author.name}. ${project.copyright}"
				destdir="${project.tmp}/${project.name}/reference" 
				stylesheetfile="resources/stylesheet.css" 
				doctitle="Javadocs: ${project.name}" 
				windowtitle="Javadocs: ${project.name}"
				public="true" version="false" verbose="false">
			<classpath><path refid="classpath"/></classpath>
			<link href="${javadoc.java.href}" />
			<link href="${javadoc.processing.href}" />
			<taglet name="ExampleTaglet" path="resources/code" />
			<!--doclet name="ExcludeDoclet" path="resources/code" >
               <param name="-output" value="${project.tmp}/${project.name}/reference"/>
            </doclet-->
			<fileset dir="${project.tmp}/${project.name}/src/" defaultexcludes="yes">
				<!-- add packages to be added to reference. src or src/rita? -->
				<include name="test/*.java"/>
				<include name="rita/**/*.java"/>
				<include name="rita/**/*.pde"/>
			</fileset>
		</javadoc>
	</target>

	<target name="generate.web" if="is.normal">

		<mkdir dir="${project.dist.version}/web" />
		<copy todir="${project.dist.version}/web/reference">
			<fileset dir="${project.dist.version}/${project.name}/reference" />
		</copy>

		<copy todir="${project.dist.version}/web/examples">
			<fileset dir="${project.dist.version}/${project.name}/examples" />
		</copy>

		<copy todir="${project.dist.version}/web">
			<fileset dir="${project.web}" />
		</copy>

		<!--
  				format the index.html file. 
			  	regular expressions are used to parse the web index.html file. 
			  	key words starting and ending with ## are replaced by values 
			  	defined earlier in the beginning of this build file.
	  	-->

		<replaceregexp file="${project.dist.version}/web/index.html"
  	                         match="##project.name##"
  	                         replace="${project.name}"
  	                         flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
							match="##author.name##"
							replace="${author.name}"
							flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
							match="##project.version##"
							replace="${project.version}"
							flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
							match="##author.url##"
  							replace="${author.url}"
							flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##date##"
  	  						replace="${date}"
  	  						flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##project.keywords##"
  	  						replace="${project.keywords}"
  	  						flags="g" />


		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##tested.platform##"
  	  						replace="${tested.platform}"
  	  						flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##tested.processingversion##"
  	  						replace="${tested.processingversion}"
  	  						flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##project.dependencies##"
  	  						replace="${project.dependencies}"
  	  						flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##source.host##"
  	  						replace="${source.host}"
  	  						flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##source.url##"
  	  						replace="${source.url}"
  	  						flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##source.repository##"
  	  						replace="${source.repository}"
  	  						flags="g" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  							match="##project.copyright##"
  	  						replace="${project.copyright}"
  	  						flags="g" />

		<antcall target="processExamples" />

		<replaceregexp file="${project.dist.version}/web/index.html"
  	  							match="##project.examples##"
  	  	  						replace=""
  	  	  						flags="g" />
	</target>

	<target name="generate.install.library" if="is.normal">
		<echo message="Copying ${install.source}, ${license.source} ... " />
		<echo message="  to ${project.dist.version} ... " />

		<copy file="${install.source}" tofile="${install.destination}" />
		<copy file="${license.source}" tofile="${license.destination}" />
		<!--replaceregexp file="${install.destination}" match="##name##" replace="${project.name}" flags="g" />
		<replaceregexp file="${install.destination}" match="##folder##" replace="libraries" flags="g" /-->
	</target>

	<target name="generate.install.props" if="is.normal">

		<echo message="Copying ${props.src} to ${props.dst} ..." />
		<copy file="${props.src}" tofile="${props.dst}" />
		<replaceregexp file="${props.dst}" match="##version##" replace="${project.version}" flags="g" />
		<replaceregexp file="${props.dst}" match="##versionnum##" replace="${project.version.num}" flags="g" />
		<copy file="${props.dst}" tofile="${project.latest}/${project.name}.txt" />

		<!-- add the license file as well -->
		<echo message="Copying ${license.destination} to ${project.dist.version}/${project.name}/LICENSE.txt ..." />
		<move file="${license.destination}" tofile="${project.dist.version}/${project.name}/LICENSE.txt" />

	</target>

	<target name="generate.zip" if="is.normal">

		<echo message="Generating distributable zip..." />

		<antcall target="fetch.rita.js" />

		<move todir="${project.dist.version}/tmp/${project.name}-${project.version}/${project.name}">
			<fileset dir="${project.dist.version}/${project.name}" />
		</move>

		<move file="${install.destination}" tofile="${project.dist.version}/tmp/${project.name}-${project.version}/INSTALL.txt" />

		<zip destfile="${project.dist.version}/${project.name}-${project.version}.zip"
  	       basedir="${project.dist.version}/tmp/${project.name}-${project.version}"
  	       excludes="**/.DS_Store"
		/>

		<move file="${project.dist.version}/${project.name}-${project.version}.zip" todir="${project.dist.version}/web/download" />
		<move todir="${project.dist.version}">
			<fileset dir="${project.dist.version}/web" />
		</move>

		<delete dir="${project.dist.version}/tmp" />

	</target>

	<target name="versionSourcefile">
		<echo message="Updating version info in: ${file}" />
		<replaceregexp file="${file}" match="##author##" replace="${author.name} ${author.url}" flags="g" />
		<replaceregexp file="${file}" match="##version##" replace="${project.version}" flags="g" />
		<replaceregexp file="${file}" match="##date##" replace="${date}" flags="g" />
		<replaceregexp file="${file}" match="##copyright##" replace="${project.copyright}" flags="g" />
		<replaceregexp file="${file}" match="##name##" replace="${project.name}" flags="g" />
	</target>

	<!-- parsing the examples folder -->
	<target name="processExamples">
		<dirset id="examples.contents" dir="${project.examples}" excludes="*/*"/>
		<property name="examples.list" refid="examples.contents"/>
		<foreach list="${examples.list}" target="addExamples" param="exampleDir" delimiter=";">
		</foreach>
	</target>

	<target name="addExamples">
		<echo message="adding example ${exampleDir}" />
		<replaceregexp file="${project.dist.version}/web/index.html"
	  				match="(##project.examples##)"
	  	  			replace="&lt;li&gt;&lt;a href=&quot;examples/${exampleDir}/${exampleDir}.pde&quot;&gt;${exampleDir}&lt;/a&gt;&lt;/li&gt; \1"
	  	  			flags="g" />
	</target>

	<target name="clean" depends="make.java">
		<delete dir="${project.tmp}"/>
		<echo>
		
${line}
Name	${project.name} 
Version	${project.version}
Compiled	${project.compile}
Sketchbook	${sketchbook.location}
${line}
Done.
${line}	
		</echo>
	</target>

</project>

